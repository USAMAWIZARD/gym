
<!DOCTYPE html>
<html>
<head>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!------ Include the above in your HEAD tag ---------->


    <title>Attendence page</title>
   <!--Made with love by Mutiullah Samim -->
   
    <!--Bootsrap 4 CDN-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    
    <!--Fontawesome CDN-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <!--Custom styles-->
        {% load static %}
            <link rel="stylesheet" type="text/css" href="{% static '/styles.css' %}">
</head>
<body>
<div class="container">
    <div class="d-flex justify-content-center h-100">
        <div class="card">
            <div class="card-header">
                <h3>Register  member</h3>
                <div class="d-flex justify-content-end social_icon">
                    <span><i class="fab fa-facebook-square"></i></span>
                    <span><i class="fab fa-google-plus-square"></i></span>
                    <span><i class="fab fa-twitter-square"></i></span>
                </div>
            </div>
            <div class="card-body">
                <form action="/registeruserdata/" method="POST">
                        {% csrf_token %}
                    <b>new member<b>
                        <input type ="radio" id="newradio" name="membertype" onchange= "setidfield()" value="new">
                        <br>
                    Existing member
                    <input type="radio" id="oldradio" value="old" name="membertype" onchange="setidfield()">

                    <div class="input-group form-group" id="newinputfield" style="visibility:hidden;"> 
                        <div class="input-group-prepend">
                            <span class="input-group-text"><i class="fas fa-user"></i></span>
                        </div>
                              

                        <input type="text" onkeyup="setdataforalreadymember()" class="form-control" placeholder="Enter your Gym id" required="true" id="idofalreadyexistmember"  name="idofalreadyexistmem">
                        
                    </div>     
                    <div class="input-group form-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text"><i class="fas fa-user"></i></span>
                        </div>
                        <input type="text" class="form-control" placeholder="name" required="true"  onchange="setidfield()" name="name">
                        
                    </div>      

                    <div class="input-group form-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text"><i class="fa fa-phone"></i></span>
                        </div>
                        <input type="text" class="form-control" placeholder="phone number" required="true" name="number">
                        
                    </div>
            <div class="input-group form-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text"><i class=" fas fa-male"></i></span>
                        </div>
                        <input type="number" class="form-control" placeholder="age" required="true" name="age">
                       
                    </div>

            <div class="input-group form-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text"><i class=" fas fa-calendar-alt"></i></span>
                        </div>
                        <input type="date "   class="input-group-text"  onfocus="(this.type='date')"placeholder="Register date" id="Registerdate" name="joiningdate">
                        
                    </div>
                    <script type="text/javascript">
var today = new Date(); 
var dd = String(today.getDate()).padStart(2, '0');
var mm = String(today.getMonth() + 1).padStart(2, '0'); 
var yyyy = today.getFullYear();


document.getElementById('Registerdate').value= mm + '-' + dd + '-' + yyyy;
                    </script>

       <div class="input-group form-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text"><i class=" fas fa-male"></i></span>
                        </div>
                        <input type="number" id="noofmonths"required="true" class="form-control" placeholder="months of registration " onchange ="setendingdate()">
                       
                    </div>
                    <script type="text/javascript">
                        function setendingdate(){
a=document.getElementById("Registerdate").value
var d = new  Date(a)
d.setMonth(parseInt(document.getElementById("noofmonths").value)+parseInt(d.getMonth()))    
console.log(today.getMonth())
var dd = String(d.getDate()).padStart(2, '0');
var mm = String(d.getMonth() + 1 ).padStart(2, '0'); 
var yyyy = d.getFullYear();

document.getElementById("endingdate").value=mm+'-'+dd+'-'+yyyy
console.log(d.getMonth())


       //document.write(dt)


                        }

                    </script>


<script type="text/javascript">
    function setidfield(){

       if(document.getElementById("newradio").checked==true){
            document.getElementById("newinputfield").style.visibility="visible";

        } 
        else{
            document.getElementById("newinputfield").style.visibility="hidden";

        }
    }
</script>
            <div class="input-group form-group">
          

                        <div class="input-group-prepend">
                            <span class="input-group-text"><i class="fas fa-calendar-alt"></i></span>
                        </div>
                        <input type="text"   class="input-group-text" onfocus="(this.type='date')" placeholder="Ending date"
                        disabled="true" id="endingdate" name="enddate">
                        
                    </div>
            
                    
                        {% csrf_token %}
                        <input type="submit" value="Register" class="btn float-right login_btn ">
                    
                </form>
            </div>
            <div class="card-footer">
                <div class="d-flex justify-content-center links">
                    Register new member (Admin) <a href="#">Regester</a>
                </div>
                <div class="d-flex justify-content-center">
                    
                </div>
            </div>
        </div>
    </div>
</div>
</body>

<script type="">   

  function setdataforalreadymember(){
    var id=document.getElementById("idofalreadyexistmember").value;
 
         
         $.ajax({
          // URL for the controller function that fetches and prints the data of the selected phone from dropdown list
           url : "/getalreadyexistdata/",
           // method of getting data is POST..not GET..
           method : "POST",
           // Data got through input are sent to the server
           data: {memid: id,
           csrfmiddlewaretoken: '{{ csrf_token }}'},
           dataType: "JSON",
  
           // if data is fetched successfully, this function will be executed
           success:function(data){
            // print the recieved data from server in the section called com_result in compare_phones view file
            console.log(data)
            //var data = $.parseJSON(data)
           //   data=JSON.parse(dataType)
           for (var i in data) {
        
            console.log(data[i].name +data[i].age +data[i].phoneno )
            document.getElementsByName("name")[0].value=data[i].name 
            document.getElementsByName("number")[0].value=data[i].phoneno
            document.getElementsByName("age")[0].value=data[i].age
          
        }

       
         },
          error:function(obj)
          {           
           document.getElementsByName("name")[0].value=""
            document.getElementsByName("number")[0].value=""
            document.getElementsByName("age")[0].value=""
         
          }  
           // type of the data sent and received
           
         });
         // end of AJAX request
     
  
}

</script>>